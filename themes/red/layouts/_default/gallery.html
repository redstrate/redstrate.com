{{ define "main" }}
    <h2>{{ .Title }}</h2>

    {{ .Content }}

    {{ $art := (index site.Data ($.Param "json")) }}

    {{ range $art.categories }}
        <h3>{{ .name }}</h3>
        <p>{{ .description }}</p>
        {{ range sort .years "year" "desc" }}
            <h4>{{ .year }}</h4>

            {{ range .pieces }}
                <figure>
                    {{ $full := resources.Get (printf "%s/%s" ($.Param "json") .filename) }}

                    <a href="{{ $full.Permalink }}">
                        {{ if $.Params.thumbnails }}
                            {{ $title := .title }}
                            {{ with resources.Get (printf "%s-thumbs/%s" ($.Param "json") .filename) }}
                            <img alt="{{ $title }}" width="128px" height="128px" src="{{ .Permalink }}"/>
                            {{ else }}
                            <p>Thumbnail not found!</p>
                            {{ end }}
                        {{ else }}
                            <img alt="{{ .title }}" src="{{ $full.Permalink }}"/>
                        {{ end }}
                    </a>

                    <figcaption>
                        "{{ .title }}"
                        {{ if .newgrounds_url }}
                            <a href="{{ .newgrounds_url }}">Newgrounds</a>
                        {{ end }}
                        {{ if .pixiv_url }}
                            <a href="{{ .pixiv_url }}">Pixiv</a>
                        {{ end }}
                    </figcaption>
                </figure>
            {{ end }}
        {{ end }}
    {{ end }}
{{ end }}
