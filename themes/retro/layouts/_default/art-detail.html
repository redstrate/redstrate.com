{{ define "main" }}
    <h2>{{ .Title }}</h2>

    <hr>

    {{ if .Params.animation }}
        <p>Sorry, animations are not supported.</p>
    {{ else }}
        {{ if .Params.threed }}
            <p>Sorry, 3D models are not supported.</p>
        {{ else }}
            {{ with (resources.Get .Params.filename).Resize "400x bmp" }}
                <img class="article-img" style="display: block; max-height: 1000px; margin-left: auto; margin-right: auto;" alt="{{ $.Params.alt_text }}" title="{{ $.Params.alt_text }}" src="{{ .RelPermalink }}"/>
            {{ end }}
        {{ end }}
    {{ end }}

    <table>
    <tr>
        <th>Date</th>
        <td>
            <time datetime="{{ .Page.Lastmod.Format "Mon Jan 10 17:13:38 2020 -0700" }}" class="text-muted">
                {{ $.Date.Format "January 2006" }}
            </time>
        </td>
    </tr>

    {{ with .Params.arttags }}
        <tr>
            <th>Tags</th>
            <td>
                {{ $len := (len .) }}
                {{ range $index, $element := . }}
                <a href="/art/tags/{{ urlize . }}/"><strong>{{ $element }}</strong></a>{{ if not (eq (add $index 1) $len) }},{{ end }}
                {{ end }}
            </td>
        </tr>
    {{ end }}

    {{ with .Params.characters }}
        <tr>
            <th>Characters</th>
            <td>
                {{ $len := (len .) }}
                {{ range $index, $element := . }}
                <a href="/art/characters/{{ urlize .}}/"><strong>{{ $element }}</strong></a>{{ if not (eq (add $index 1) $len) }},{{ end }}
                {{ end }}
            </td>
        </tr>
    {{ end }}

    {{ with .Params.program }}
        <tr>
            <th>Program</th>
            <td>
                {{ . }}
            </td>
        </tr>
    {{ end }}

    {{ with .Params.mastodon_url }}
        <tr>
            <th>Mastodon URL</th>
            <td>
                <a href="{{ . }}">{{ . }}</a>
            </td>
        </tr>
    {{ end }}

    {{ with .Params.newgrounds_url }}
        <tr>
            <th>Newgrounds URL</th>
            <td>
                <a href="{{ . }}">{{ . }}</a>
            </td>
        </tr>
    {{ end }}


    {{ with .Params.pixiv_url }}
        <tr>
            <th>Pixiv URL</th>
            <td>
                <a href="{{ . }}">{{ . }}</a>
            </td>
        </tr>
    {{ end }}

    </table>

    {{ with .Content }}
    <h3>Commentary</h3>

    <p>
        {{ . }}
    </p>
    {{ end }}
{{ end }}
